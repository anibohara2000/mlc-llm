





<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Python API for Model Compilation &mdash; mlc-llm 0.1.0 documentation</title>
  

  
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/tabs.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/tlcpack_theme.css" type="text/css" />

  
  

  
  
  
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <script type="text/javascript" src="../_static/js/tlcpack_theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="ðŸš§ Configure Quantization" href="configure_quantization.html" />
    <link rel="prev" title="Distribute Compiled Models" href="distribute_compiled_models.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    
<header class="header">
    <div class="innercontainer">
      <div class="headerInner d-flex justify-content-between align-items-center">
          <div class="headerLogo">
          </div>

          <div id="headMenu" class="headerNav">
            <button type="button" id="closeHeadMenu" class="navCloseBtn"><img src="../_static/img/close-icon.svg" alt="Close"></button>
             <ul class="nav">
                <li class="nav-item">
                   <a class="nav-link" href=https://llm.mlc.ai/>Home</a>
                </li>
                <li class="nav-item">
                   <a class="nav-link" href=https://github.com/mlc-ai/mlc-llm>Github</a>
                </li>
                <li class="nav-item">
                   <a class="nav-link" href=https://discord.gg/9Xpy2HGBuD>Discord Server</a>
                </li>
             </ul>
               <div class="responsivetlcdropdown">
                 <button type="button" class="btn-link">
                   Other Resources
                 </button>
                 <ul>
                     <li>
                       <a href=https://mlc.ai/>MLC Course</a>
                     </li>
                     <li>
                       <a href=https://blog.mlc.ai/>MLC Blog</a>
                     </li>
                     <li>
                       <a href=https://webllm.mlc.ai/>Web LLM</a>
                     </li>
                 </ul>
               </div>
          </div>
            <div class="responsiveMenuIcon">
              <button type="button" id="menuBtn" class="btn-menu"><img src="../_static/img/menu-icon.svg" alt="Menu Icon"></button>
            </div>

            <div class="tlcDropdown">
              <div class="dropdown">
                <button type="button" class="btn-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  Other Resources
                </button>
                <div class="dropdown-menu dropdown-menu-right">
                  <ul>
                     <li>
                       <a href=https://mlc.ai/>MLC Course</a>
                     </li>
                     <li>
                       <a href=https://blog.mlc.ai/>MLC Blog</a>
                     </li>
                     <li>
                       <a href=https://webllm.mlc.ai/>Web LLM</a>
                     </li>
                  </ul>
                </div>
              </div>
          </div>
       </div>
    </div>
 </header>
 
    <nav data-toggle="wy-nav-shift" class="wy-nav-side fixed">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/mlc-logo-with-text-landscape.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
                <div class="version">
                  0.1.0
                </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Get Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../get_started/project_overview.html">Project Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../get_started/mlc_chat_config.html">Configure MLCChat in JSON</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Build and Deploy Apps</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../deploy/javascript.html">WebLLM and Javascript API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deploy/rest.html">Rest API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deploy/cli.html">CLI and C++ API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deploy/python.html">Python API and Gradio Frontend</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deploy/ios.html">iOS App and Swift API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deploy/android.html">Android App</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Compile Models</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="compile_models.html">Compile Models via MLC</a></li>
<li class="toctree-l1"><a class="reference internal" href="distribute_compiled_models.html">Distribute Compiled Models</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Python API for Model Compilation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#install-mlc-llm-as-a-package">Install MLC-LLM as a Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="#compiling-model-in-python">Compiling Model in Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="#api-reference">API Reference</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#mlc_llm.BuildArgs"><code class="docutils literal notranslate"><span class="pre">BuildArgs</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#mlc_llm.build_model"><code class="docutils literal notranslate"><span class="pre">build_model()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="configure_quantization.html">ðŸš§ Configure Quantization</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Define Model Architectures</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/customize/define_new_models.html">Define New Model Architectures</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Prebuilt Models</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../prebuilt_models.html">Model Prebuilts</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Dependency Installation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../install/tvm.html">Install TVM Unity Compiler</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install/mlc_llm.html">Install MLC LLM Python Package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install/conda.html">Install Conda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install/gpu.html">GPU Drivers and SDKs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install/emcc.html">Install Wasm Build Environment</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Community</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../community/guideline.html">Community Guideline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community/faq.html">Frequently Asked Questions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Privacy</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../privacy.html">MLC Chat App Privacy</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      
      <nav class="wy-nav-top" aria-label="top navigation" data-toggle="wy-nav-top">
        
            <div class="togglemenu">

            </div>
            <div class="nav-content">
              <!-- mlc-llm -->
              Table of Contents
            </div>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        

          




















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> <span class="br-arrow">></span></li>
        
      <li>Python API for Model Compilation</li>
    
    
      
      
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/mlc-ai/mlc-llm/edit/main/docs/compilation/python.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="python-api-for-model-compilation">
<h1>Python API for Model Compilation<a class="headerlink" href="#python-api-for-model-compilation" title="Permalink to this heading">Â¶</a></h1>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#install-mlc-llm-as-a-package" id="id1">Install MLC-LLM as a Package</a></p></li>
<li><p><a class="reference internal" href="#compiling-model-in-python" id="id2">Compiling Model in Python</a></p></li>
<li><p><a class="reference internal" href="#api-reference" id="id3">API Reference</a></p></li>
</ul>
</nav>
<p>We expose Python API for compiling/building model in the package <code class="xref py py-mod docutils literal notranslate"><span class="pre">mlc_llm</span></code>, so
that users may build model in any directory in their program (i.e. not just
within the mlc-llm repo).</p>
<section id="install-mlc-llm-as-a-package">
<h2><a class="toc-backref" href="#id1" role="doc-backlink">Install MLC-LLM as a Package</a><a class="headerlink" href="#install-mlc-llm-as-a-package" title="Permalink to this heading">Â¶</a></h2>
<p>To install, we first clone the repository (as mentioned in
<a class="reference internal" href="compile_models.html#compile-models-via-mlc"><span class="std std-ref">Compile Models via MLC</span></a>):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># clone the repository</span>
git<span class="w"> </span>clone<span class="w"> </span>git@github.com:mlc-ai/mlc-llm.git<span class="w"> </span>--recursive
</pre></div>
</div>
<p>Afterwards, we use <code class="docutils literal notranslate"><span class="pre">pip</span></code> to install <code class="xref py py-mod docutils literal notranslate"><span class="pre">mlc_llm</span></code> as a package so that we can
use it in any directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># enter to root directory of the repo</span>
<span class="nb">cd</span><span class="w"> </span>mlc-llm
<span class="c1"># install the package</span>
pip<span class="w"> </span>install<span class="w"> </span>-e<span class="w"> </span>.
</pre></div>
</div>
<p>To verify installation, you are expected to see information about the package
<code class="xref py py-mod docutils literal notranslate"><span class="pre">mlc_llm</span></code> even if you are not in the directory of <code class="docutils literal notranslate"><span class="pre">mlc-llm</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;import mlc_llm; print(mlc_llm)&quot;</span>
</pre></div>
</div>
</section>
<section id="compiling-model-in-python">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Compiling Model in Python</a><a class="headerlink" href="#compiling-model-in-python" title="Permalink to this heading">Â¶</a></h2>
<p>After installing the package, you can build the model using <a class="reference internal" href="#mlc_llm.build_model" title="mlc_llm.build_model"><code class="xref py py-meth docutils literal notranslate"><span class="pre">mlc_llm.build_model()</span></code></a>,
which takes in an instance of <code class="xref py py-class docutils literal notranslate"><span class="pre">BuildArgs</span></code> (a dataclass that represents
the arguments for building a model).</p>
<p>For detailed instruction with code, please refer to <a class="reference external" href="https://github.com/mlc-ai/notebooks/blob/main/mlc-llm/tutorial_compile_llama2_with_mlc_llm.ipynb">the python notebook</a>
(executable in Colab), where we walk you through compiling Llama-2 with <code class="xref py py-mod docutils literal notranslate"><span class="pre">mlc_llm</span></code>
in Python.</p>
</section>
<section id="api-reference">
<span id="api-reference-compile-model"></span><h2><a class="toc-backref" href="#id3" role="doc-backlink">API Reference</a><a class="headerlink" href="#api-reference" title="Permalink to this heading">Â¶</a></h2>
<p>In order to use the python API <a class="reference internal" href="#mlc_llm.build_model" title="mlc_llm.build_model"><code class="xref py py-meth docutils literal notranslate"><span class="pre">mlc_llm.build_model()</span></code></a>, users need to create
an instance of the dataclass <code class="xref py py-class docutils literal notranslate"><span class="pre">BuildArgs</span></code>. The corresponding arguments in
command line shown in <a class="reference internal" href="compile_models.html#compile-command-specification"><span class="std std-ref">Compile Command Specification</span></a> are automatically
converted from the definition of <code class="xref py py-class docutils literal notranslate"><span class="pre">BuildArgs</span></code> and are equivalent.</p>
<p>Then with an instantiated <code class="xref py py-class docutils literal notranslate"><span class="pre">BuildArgs</span></code>, users can call the build API
<a class="reference internal" href="#mlc_llm.build_model" title="mlc_llm.build_model"><code class="xref py py-meth docutils literal notranslate"><span class="pre">mlc_llm.build_model()</span></code></a>.</p>
<dl class="py class">
<dt class="sig sig-object py" id="mlc_llm.BuildArgs">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mlc_llm.</span></span><span class="sig-name descname"><span class="pre">BuildArgs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'auto'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hf_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quantization</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'q4f16_1'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_seq_len</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">-1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'auto'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reuse_lib</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">artifact_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'dist'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_cache</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">convert_weight_only</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">build_model_only</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug_dump</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug_load_script</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">llvm_mingw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cc_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">system_lib</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sep_embed</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_safetensors</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enable_batching</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">no_cutlass_attn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">no_cutlass_norm</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">no_cublas</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_cuda_graph</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_shards</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_flash_attn_mqa</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pdb</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mlc_llm.BuildArgs" title="Permalink to this definition">Â¶</a></dt>
<dd><p>BuildArgs is the dataclass that organizes the arguments we use in
building a model.</p>
<p>To use <a class="reference internal" href="#mlc_llm.build_model" title="mlc_llm.build_model"><code class="xref py py-meth docutils literal notranslate"><span class="pre">mlc_llm.build_model()</span></code></a>, users pass in an instance of <a class="reference internal" href="#mlc_llm.BuildArgs" title="mlc_llm.BuildArgs"><code class="xref py py-class docutils literal notranslate"><span class="pre">BuildArgs</span></code></a>; for
CLI entry points, an equivalent <code class="xref py py-class docutils literal notranslate"><span class="pre">ArgumentParser</span></code> instance is generated based
on the definition of this class using <code class="xref py py-meth docutils literal notranslate"><span class="pre">mlc_llm.convert_build_args_to_argparser()</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>str</em>) â€“ The name of the model to build. If it is <code class="docutils literal notranslate"><span class="pre">auto</span></code>, we will automatically
set the model name according to <code class="docutils literal notranslate"><span class="pre">--model-path</span></code>, <code class="docutils literal notranslate"><span class="pre">hf-path</span></code>, or the model
folders under <code class="docutils literal notranslate"><span class="pre">--artifact-path/models</span></code>.</p></li>
<li><p><strong>hf_path</strong> (<em>str</em>) â€“ Hugging Face path from which to download params, tokenizer, and config.</p></li>
<li><p><strong>quantization</strong> (<em>str</em>) â€“ The quantization mode we use to compile.</p></li>
<li><p><strong>max_seq_len</strong> (<em>int</em>) â€“ The maximum allowed sequence length for the model.</p></li>
<li><p><strong>target</strong> (<em>str</em>) â€“ The target platform to compile the model for.</p></li>
<li><p><strong>db_path</strong> (<em>str</em>) â€“ Path to log database for all models. Default: <code class="docutils literal notranslate"><span class="pre">./log_db/</span></code>.</p></li>
<li><p><strong>reuse_lib</strong> (<em>str</em>) â€“ Whether to reuse a previously generated lib.</p></li>
<li><p><strong>artifact_path</strong> (<em>str</em>) â€“ Where to store the output.</p></li>
<li><p><strong>use_cache</strong> (<em>int</em>) â€“ Whether to use previously pickled IRModule and skip trace.</p></li>
<li><p><strong>convert_weight_only</strong> (<em>bool</em>) â€“ Whether to only convert model weights and not build the model. If both
<code class="docutils literal notranslate"><span class="pre">convert_weight_only</span></code> and <code class="docutils literal notranslate"><span class="pre">build_model_only</span></code> are set, the behavior is undefined.</p></li>
<li><p><strong>build_model_only</strong> (<em>bool</em>) â€“ Whether to only build model and do not convert model weights.</p></li>
<li><p><strong>debug_dump</strong> (<em>bool</em>) â€“ Whether to dump debugging files during compilation.</p></li>
<li><p><strong>debug_load_script</strong> (<em>bool</em>) â€“ Whether to load the script for debugging.</p></li>
<li><p><strong>llvm_mingw</strong> (<em>str</em>) â€“ <code class="docutils literal notranslate"><span class="pre">/path/to/llvm-mingw-root</span></code>, use llvm-mingw to cross compile to windows.</p></li>
<li><p><strong>system_lib</strong> (<em>bool</em>) â€“ A parameter to <code class="docutils literal notranslate"><span class="pre">relax.build</span></code>.</p></li>
<li><p><strong>sep_embed</strong> (<em>bool</em>) â€“ Build with separated embedding layer, only applicable to LlaMa. This
feature is in testing stage, and will be formally replaced after massive
overhaul of embedding feature for all models and use cases.</p></li>
<li><p><strong>enable_batching</strong> (<em>bool</em>) â€“ Build the model for batched inference.
This is a temporary flag used to control the model execution flow in single-
sequence and batching settings for now. We will eventually merge two flows
in the future and remove this flag then.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="mlc_llm.build_model">
<span class="sig-prename descclassname"><span class="pre">mlc_llm.</span></span><span class="sig-name descname"><span class="pre">build_model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#mlc_llm.BuildArgs" title="mlc_llm.core.BuildArgs"><span class="pre">BuildArgs</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mlc_llm.build_model" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Builds/compiles a model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>args</strong> (<a class="reference internal" href="#mlc_llm.BuildArgs" title="mlc_llm.BuildArgs"><code class="xref py py-class docutils literal notranslate"><span class="pre">BuildArgs</span></code></a>) â€“ A dataclass of arguments for building models.mlc_llm/core.py</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>lib_path</strong> (<em>Optional[str]</em>) â€“ The path to the model library file. Return <code class="docutils literal notranslate"><span class="pre">None</span></code> if not applicable.</p></li>
<li><p><strong>model_path</strong> (<em>Optional[str]</em>) â€“ The path to the folder of the modelâ€™s parameters. Return <code class="docutils literal notranslate"><span class="pre">None</span></code> if not applicable.</p></li>
<li><p><strong>chat_config_path</strong> (<em>Optional[str]</em>) â€“ The path to the chat config <cite>.json</cite> file. Return <code class="docutils literal notranslate"><span class="pre">None</span></code> if not applicable.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</section>
</section>


           </div>
           
          </div>
          

<footer>

    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="configure_quantization.html" class="btn btn-neutral float-right" title="ðŸš§ Configure Quantization" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="distribute_compiled_models.html" class="btn btn-neutral float-left" title="Distribute Compiled Models" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>

<div id="button" class="backtop"><img src="../_static/img/right.svg" alt="backtop"/> </div>
<section class="footerSec">
    <div class="footerHeader">
      <div class="d-flex align-md-items-center justify-content-between flex-column flex-md-row">
        <div class="copywrite d-flex align-items-center">
          <h5 id="copy-right-info">Â© 2023 MLC LLM</h5>
        </div>
      </div>

    </div>

    <div>
      <div class="footernote"> </div>
    </div>

</section>
</footer>
        </div>
      </div>

    </section>

  </div>
  

    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

  </body>
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>